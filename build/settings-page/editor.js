(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.React,t=window.wp.i18n,i=window.wp.components,o=window.wp.element,s=window.wp.data,d=window.wp.domReady;var a=e.n(d);const r=window.wp.api;var c=e.n(r);const l=window.wp.notices,p=window.ReactJSXRuntime,u=()=>{const e=(0,s.useSelect)((e=>e(l.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:n}=(0,s.useDispatch)(l.store);return(0,p.jsx)(i.SnackbarList,{className:"edit-site-notices",notices:e,onRemove:n})};function _(){const[e,d]=(0,n.useReducer)(((e,n)=>({...e,...n})),{isLoaded:!1,apiToken:"",developmentScript:"false"}),{isLoaded:a,apiToken:r,developmentScript:l}=e;return(0,n.useEffect)((()=>{c().loadPromise.then((()=>{const e=new(c().models.Settings);!1===a&&e.fetch().then((e=>{var n,t;d({apiToken:null!==(n=e.fundraising_option_token)&&void 0!==n?n:"",developmentScript:null!==(t=e.fundraising_option_development_script)&&void 0!==t?t:"false",isLoaded:!0})}))}))}),[a]),(0,p.jsxs)(o.Fragment,{children:[(0,p.jsx)("div",{className:"fundy__header",children:(0,p.jsx)("div",{className:"fundy__container",children:(0,p.jsx)("div",{className:"fundy__title",children:(0,p.jsxs)("h1",{children:[(0,t.__)("Fundy Settings","fundy")," ",(0,p.jsx)(i.Icon,{icon:"admin-plugins"})]})})})}),(0,p.jsx)("div",{className:"components-panel",children:(0,p.jsxs)(i.PanelBody,{title:"General",children:[(0,p.jsx)("p",{children:"The plugin must authenticate with the Fundy server to work, please provide the details below."}),(0,p.jsx)(i.TextControl,{help:(0,t.__)("The API token for your Fundy organization.","fundy"),label:(0,t.__)("Fundy API Token","fundy"),onChange:e=>d({apiToken:e}),value:r}),(0,p.jsx)(i.ToggleControl,{help:(0,t.__)("Whether to use the development version of the form renderer script.","fundy"),label:(0,t.__)("Use Development Script?","fundy"),onChange:e=>d({developmentScript:e?"true":"false"}),checked:"true"===l})]})}),(0,p.jsx)("div",{className:"fundy__save",children:(0,p.jsx)(i.Button,{variant:"primary",onClick:()=>{new(c().models.Settings)({fundraising_option_token:r,fundraising_option_development_script:l}).save(),(0,s.dispatch)("core/notices").createNotice("success",(0,t.__)("Settings Saved","fundy"),{type:"snackbar",isDismissible:!0})},children:(0,t.__)("Save","fundy")})}),(0,p.jsx)("div",{className:"fundy__notices",children:(0,p.jsx)(u,{})})]})}a()((function(){const e=document.getElementById("fundraising-plugin-settings");e&&(0,o.createRoot)(e).render((0,p.jsx)(_,{}))}))})();