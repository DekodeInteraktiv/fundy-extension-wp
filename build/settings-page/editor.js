(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.React,t=window.wp.i18n,o=window.wp.components,a=window.wp.element,i=window.wp.data,r=window.wp.domReady;var s=e.n(r);const l=window.wp.api;var c=e.n(l);const d=window.wp.notices,u=()=>{const e=(0,i.useSelect)((e=>e(d.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:t}=(0,i.useDispatch)(d.store);return(0,n.createElement)(o.SnackbarList,{className:"edit-site-notices",notices:e,onRemove:t})};function p(){const[e,r]=(0,n.useReducer)(((e,n)=>({...e,...n})),{isLoaded:!1,apiToken:"",developmentScript:"false"}),{isLoaded:s,apiToken:l,developmentScript:d}=e;return(0,n.useEffect)((()=>{c().loadPromise.then((()=>{const e=new(c().models.Settings);!1===s&&e.fetch().then((e=>{var n,t;r({apiToken:null!==(n=e.fundraising_option_token)&&void 0!==n?n:"",developmentScript:null!==(t=e.fundraising_option_development_script)&&void 0!==t?t:"false",isLoaded:!0})}))}))}),[s]),(0,n.createElement)(a.Fragment,null,(0,n.createElement)("div",{className:"fundy__header"},(0,n.createElement)("div",{className:"fundy__container"},(0,n.createElement)("div",{className:"fundy__title"},(0,n.createElement)("h1",null,(0,t.__)("Fundy Settings","fundy")," ",(0,n.createElement)(o.Icon,{icon:"admin-plugins"}))))),(0,n.createElement)("div",{className:"components-panel"},(0,n.createElement)(o.PanelBody,{title:"General"},(0,n.createElement)("p",null,"The plugin must authenticate with the Fundy server to work, please provide the details below."),(0,n.createElement)(o.TextControl,{help:(0,t.__)("The API token for your Fundy organization.","fundy"),label:(0,t.__)("Fundy API Token","fundy"),onChange:e=>r({apiToken:e}),value:l}),(0,n.createElement)(o.ToggleControl,{help:(0,t.__)("Whether to use the development version of the form renderer script.","fundy"),label:(0,t.__)("Use Development Script?","fundy"),onChange:e=>r({developmentScript:e?"true":"false"}),checked:"true"===d}))),(0,n.createElement)("div",{className:"fundy__save"},(0,n.createElement)(o.Button,{variant:"primary",onClick:()=>{new(c().models.Settings)({fundraising_option_token:l,fundraising_option_development_script:d}).save(),(0,i.dispatch)("core/notices").createNotice("success",(0,t.__)("Settings Saved","fundy"),{type:"snackbar",isDismissible:!0})}},(0,t.__)("Save","fundy"))),(0,n.createElement)("div",{className:"fundy__notices"},(0,n.createElement)(u,null)))}s()((function(){const e=document.getElementById("fundraising-plugin-settings");e&&(0,a.createRoot)(e).render((0,n.createElement)(p,null))}))})();