(()=>{"use strict";var e={338:(e,n,t)=>{var r=t(795);n.H=r.createRoot,r.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},n={};function t(r){var o=n[r];if(void 0!==o)return o.exports;var d=n[r]={exports:{}};return e[r](d,d.exports,t),d.exports}t.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return t.d(n,{a:n}),n},t.d=(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},t.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var r=t(338);const o=window.wp.domReady;var d=t.n(o);const a=window.wp.element,i=window.wp.i18n,s=window.ReactJSXRuntime;function c(e){return new Date(e).toLocaleDateString()}const l=()=>{var e;const[n,t]=(0,a.useReducer)(((e,n)=>({...e,...n})),{isLoaded:!1,isError:!1,baseURL:null!==(e=window.fundySettings.baseURL)&&void 0!==e?e:null,donation:null}),{isLoaded:r,isError:o,baseURL:d,donation:l}=n;return(0,a.useEffect)((()=>{const e=function(){const e=new URLSearchParams(window.location.search);return{donationId:e.get("donation_id")||null,token:e.get("token")||null,expiry:e.get("expiry")||null}}();e.donationId&&e.token&&e.expiry&&d||t({isLoaded:!0,isError:!0});const n={donation_id:e.donationId,token:e.token,expiry:e.expiry},r=new URLSearchParams(n).toString();fetch(d+"/api/v1/donation/receipt?"+r,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((e=>{t({isLoaded:!0,isError:!1,donation:e})})).catch((()=>{t({isLoaded:!0,isError:!0})}))}),[d]),r?o||!l?(0,s.jsx)(a.Fragment,{children:(0,s.jsx)("p",{children:(0,i.__)("Unfortunately, we were unable to load the details for the donation at this moment; the link may have expired.","fundy")})}):(0,s.jsx)(a.Fragment,{children:(0,s.jsx)("table",{children:(0,s.jsx)("tbody",{children:l&&l.company_name?(0,s.jsxs)(a.Fragment,{children:[l.company_name&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Company name","fundy")}),(0,s.jsx)("td",{children:l.company_name})]}),l.first_name&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Contact person","fundy")}),(0,s.jsx)("td",{children:l.first_name+" "+l?.last_name})]}),l.created_at&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Date","fundy")}),(0,s.jsx)("td",{children:c(l.created_at)})]}),l.amount&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Total amount","fundy")}),(0,s.jsx)("td",{children:l.amount})]}),l.invoice_url&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Invoice","fundy")}),(0,s.jsx)("td",{children:(0,s.jsxs)("a",{href:l.invoice_url,children:[(0,i.__)("Download invoice","fundy")," ","â‡’"]})})]})]}):(0,s.jsxs)(a.Fragment,{children:[l.first_name&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Name","fundy")}),(0,s.jsx)("td",{children:l.first_name+" "+l?.last_name})]}),l.created_at&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Date","fundy")}),(0,s.jsx)("td",{children:c(l.created_at)})]}),l.amount&&(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,i.__)("Total amount","fundy")}),(0,s.jsx)("td",{children:l.amount})]})]})})})}):null};d()((function(){document.querySelectorAll(".fundy-receipt").forEach((e=>{(0,r.H)(e).render((0,s.jsx)(l,{}))}))}))})();