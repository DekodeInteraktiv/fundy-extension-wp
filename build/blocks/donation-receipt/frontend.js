(()=>{"use strict";var e={338:(e,t,n)=>{var r=n(795);t.H=r.createRoot,r.hydrateRoot},795:e=>{e.exports=window.ReactDOM}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var l=t[r]={exports:{}};return e[r](l,l.exports,n),l.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);const r=window.React;var a=n(338);const l=window.wp.domReady;var o=n.n(l);const d=window.wp.element,u=window.wp.i18n;function c(e){return new Date(e).toLocaleDateString()}const i=()=>{var e;const[t,n]=(0,d.useReducer)(((e,t)=>({...e,...t})),{isLoaded:!1,isError:!1,baseURL:null!==(e=window.fundySettings.baseURL)&&void 0!==e?e:null,donation:null}),{isLoaded:a,isError:l,baseURL:o,donation:i}=t;return(0,d.useEffect)((()=>{const e=function(){const e=new URLSearchParams(window.location.search);return{donationId:e.get("donation_id")||null,token:e.get("token")||null,expiry:e.get("expiry")||null}}();e.donationId&&e.token&&e.expiry&&o||n({isLoaded:!0,isError:!0});const t={donation_id:e.donationId,token:e.token,expiry:e.expiry},r=new URLSearchParams(t).toString();fetch(o+"/api/v1/donation/receipt?"+r,{method:"GET",headers:{"Content-Type":"application/json"}}).then((e=>{if(e.ok)return e.json();throw new Error("Network response was not ok.")})).then((e=>{n({isLoaded:!0,isError:!1,donation:e})})).catch((()=>{n({isLoaded:!0,isError:!0})}))}),[o]),a?l||!i?(0,r.createElement)(d.Fragment,null,(0,r.createElement)("p",null,(0,u.__)("Unfortunately, we were unable to load the details for the donation at this moment; the link may have expired.","fundy"))):(0,r.createElement)(d.Fragment,null,(0,r.createElement)("table",null,(0,r.createElement)("tbody",null,i&&i.company_name?(0,r.createElement)(d.Fragment,null,i.company_name&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Company name","fundy")),(0,r.createElement)("td",null,i.company_name)),i.first_name&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Contact person","fundy")),(0,r.createElement)("td",null,i.first_name+" "+i?.last_name)),i.created_at&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Date","fundy")),(0,r.createElement)("td",null,c(i.created_at))),i.amount&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Total amount","fundy")),(0,r.createElement)("td",null,i.amount)),i.invoice_url&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Invoice","fundy")),(0,r.createElement)("td",null,(0,r.createElement)("a",{href:i.invoice_url},(0,u.__)("Download invoice","fundy")," ","â‡’")))):(0,r.createElement)(d.Fragment,null,i.first_name&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Name","fundy")),(0,r.createElement)("td",null,i.first_name+" "+i?.last_name)),i.created_at&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Date","fundy")),(0,r.createElement)("td",null,c(i.created_at))),i.amount&&(0,r.createElement)("tr",null,(0,r.createElement)("td",null,(0,u.__)("Total amount","fundy")),(0,r.createElement)("td",null,i.amount)))))):null};o()((function(){document.querySelectorAll(".fundy-receipt").forEach((e=>{(0,a.H)(e).render((0,r.createElement)(i,null))}))}))})();