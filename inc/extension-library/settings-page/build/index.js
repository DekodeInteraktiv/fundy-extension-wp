(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.React,t=window.wp.i18n,o=window.wp.components,a=window.wp.element,i=window.wp.data,s=window.wp.domReady;var c=e.n(s);const l=window.wp.api;var r=e.n(l);const d=window.wp.notices,m=()=>{const e=(0,i.useSelect)((e=>e(d.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:t}=(0,i.useDispatch)(d.store);return(0,n.createElement)(o.SnackbarList,{className:"edit-site-notices",notices:e,onRemove:t})};function u(){const[e,s]=(0,n.useReducer)(((e,n)=>({...e,...n})),{isLoaded:!1,apiToken:""}),{isLoaded:c,apiToken:l}=e;return(0,n.useEffect)((()=>{r().loadPromise.then((()=>{const e=new(r().models.Settings);!1===c&&e.fetch().then((e=>{var n;s({apiToken:null!==(n=e.donations_option_token)&&void 0!==n?n:"",isLoaded:!0})}))}))}),[]),(0,n.createElement)(a.Fragment,null,(0,n.createElement)("div",{className:"donations__header"},(0,n.createElement)("div",{className:"donations__container"},(0,n.createElement)("div",{className:"donations__title"},(0,n.createElement)("h1",null,(0,t.__)("Donations Settings","donations")," ",(0,n.createElement)(o.Icon,{icon:"admin-plugins"}))))),(0,n.createElement)("div",{className:"components-panel"},(0,n.createElement)(o.PanelBody,{title:"General"},(0,n.createElement)("p",null,"The plugin must authenticate with the Fundy server to work, please provide the details below."),(0,n.createElement)(o.TextControl,{help:(0,t.__)("The API token for your Fundy organization.","donations"),label:(0,t.__)("Fundy API Token","donations"),onChange:e=>s({apiToken:e}),value:l}))),(0,n.createElement)("div",{className:"donations__save"},(0,n.createElement)(o.Button,{isPrimary:!0,onClick:()=>{new(r().models.Settings)({donations_option_token:l}).save(),(0,i.dispatch)("core/notices").createNotice("success",(0,t.__)("Settings Saved","donations"),{type:"snackbar",isDismissible:!0})}},(0,t.__)("Save","donations"))),(0,n.createElement)("div",{className:"donations__notices"},(0,n.createElement)(m,null)))}c()((function(){const e=document.getElementById("donations-plugin-settings");e&&(0,a.createRoot)(e).render((0,n.createElement)(u,null))}))})();