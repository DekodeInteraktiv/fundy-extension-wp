(()=>{"use strict";var e={n:n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},d:(n,t)=>{for(var i in t)e.o(t,i)&&!e.o(n,i)&&Object.defineProperty(n,i,{enumerable:!0,get:t[i]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n)};const n=window.React,t=window.wp.i18n,i=window.wp.components,a=window.wp.element,s=window.wp.data,o=window.wp.domReady;var r=e.n(o);const c=window.wp.api;var l=e.n(c);const d=window.wp.notices,u=()=>{const e=(0,s.useSelect)((e=>e(d.store).getNotices().filter((e=>"snackbar"===e.type))),[]),{removeNotice:t}=(0,s.useDispatch)(d.store);return(0,n.createElement)(i.SnackbarList,{className:"edit-site-notices",notices:e,onRemove:t})};function m(){const[e,o]=(0,n.useReducer)(((e,n)=>({...e,...n})),{isLoaded:!1,apiToken:""}),{isLoaded:r,apiToken:c}=e;return(0,n.useEffect)((()=>{l().loadPromise.then((()=>{const e=new(l().models.Settings);!1===r&&e.fetch().then((e=>{var n;o({apiToken:null!==(n=e.fundraising_option_token)&&void 0!==n?n:"",isLoaded:!0})}))}))}),[]),(0,n.createElement)(a.Fragment,null,(0,n.createElement)("div",{className:"fundraising__header"},(0,n.createElement)("div",{className:"fundraising__container"},(0,n.createElement)("div",{className:"fundraising__title"},(0,n.createElement)("h1",null,(0,t.__)("Fundraising Settings","fundraising")," ",(0,n.createElement)(i.Icon,{icon:"admin-plugins"}))))),(0,n.createElement)("div",{className:"components-panel"},(0,n.createElement)(i.PanelBody,{title:"General"},(0,n.createElement)("p",null,"The plugin must authenticate with the Fundy server to work, please provide the details below."),(0,n.createElement)(i.TextControl,{help:(0,t.__)("The API token for your Fundy organization.","fundraising"),label:(0,t.__)("Fundy API Token","fundraising"),onChange:e=>o({apiToken:e}),value:c}))),(0,n.createElement)("div",{className:"fundraising__save"},(0,n.createElement)(i.Button,{isPrimary:!0,onClick:()=>{new(l().models.Settings)({fundraising_option_token:c}).save(),(0,s.dispatch)("core/notices").createNotice("success",(0,t.__)("Settings Saved","fundraising"),{type:"snackbar",isDismissible:!0})}},(0,t.__)("Save","fundraising"))),(0,n.createElement)("div",{className:"fundraising__notices"},(0,n.createElement)(u,null)))}r()((function(){const e=document.getElementById("fundraising-plugin-settings");e&&(0,a.createRoot)(e).render((0,n.createElement)(m,null))}))})();